# Test Suite for the Harmonized DGIWG WMS Profile STANAG 6523 Ed.1 revision

This test suite verifies that a Web Map Service (WMS) component meets the requirements of the Harmonized
DGIWG WMS STANAG 6523 Ed.1 revision application profile, based on [DGIWG-112](https://portal.dgiwg.org/files/68226]).
A conforming implementation must also satisfy the constraints of the **Queryable WMS** conformance 
class as defined in the base [WMS 1.3 standard](http://www.opengeospatial.org/standards/wms).

## How to build the project

Before building it you need to build ets-dgiwg-core. Do the follwoing:

`git clone https://github.com/opengeospatial/ets-dgiwg-core.git`

`cd ets-dgiwg-core`

`mvn clean install`

Now you can build the project:

`git clone https://github.com/CESTA-centre/ets-wms13-dgiwg-2021.git`

`cd ets-wms13-dgiwg-2021`

`mvn clean install`

## How to run the tests

### Integrated development environment (IDE)

You can use a Java IDE such as Eclipse to run the test suite when ETS developing. 
Clone the repository and build the project. The runtime configuration is summarized below.

__Main class__: `de.latlon.ets.wms13.dgiwg.WmsDgiwgTestNGController`

__Arguments__: The first argument must refer to an XML properties file containing the 
required test run argument (a reference to a WMS 1.3 capabilities document). If not specified, 
the default location of the file at `${user.home}/test-run-props.xml` will be used.

You can modify the default settings in the sample [test-run-props.xml](src/main/config/test-run-props.xml) 
file, which is shown below. The value of the **wms** argument must be an absolute URI that 
conforms to the 'http' or 'file' schemes. **Good to know :** '&' characters must be replaced by '& amp;' (without space) in your file. 
The **tes** argument specifies the location of 
a service that provides a RESTful API for running the base WMS 1.3 test suite; by default 
the OGC teamengine installation--the 'beta' facility--will be used, but an alternative 
installation may be used instead (for example: http://localhost:8080/teamengine).

**Test run arguments** 

|Argument  |Description  |Default value  |
|:---------|:------------|:---------------|
|wms  |Location of WMS capabilities document  |
|vector  |Are any layers derived from vector data?  |false
|tes |Endpoint for test execution service  |http://cite.opengeospatial.org/te2/


```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties version="1.0">
  <comment>Test run arguments (ets-wms13-dgiwg-2021)</comment>
  <entry key="wms">type absolute URI to your Capabilities operation</entry>
  <entry key="vector">false</entry>
  <entry key="tes">http://cite.opengeospatial.org/te2/</entry>
</properties>
```

The TestNG results file (testng-results.xml) will be written to a subdirectory 
in ${user.home}/testng/ having a UUID value as its name.


### OGC test harness

Use [TEAM Engine](https://github.com/opengeospatial/teamengine), the official 
OGC test harness. The latest test suite release should be available at the 
[beta testing facility](http://cite.opengeospatial.org/te2/). You can also 
[build and deploy](https://github.com/opengeospatial/teamengine) the test 
harness yourself and use a local installation.

#### How to build and deploy on your local TEAM Engine

If you followed the local installation of TEAM Engine using _Apache Tomcat_, you can use the following instructions to deploy the ETS:

1. Build the project with  _Maven_ :

	`mvn clean install`

2. Deploy the files generated by  _Maven_  in your local installation of TEAM Engine :

	- `unzip target/ets-wms13-dgiwg-2021-VERSION-ctl.zip -d $TE_BASE/scripts`
	
	- `unzip target/ets-wms13-dgiwg-2021-VERSION-deps.zip -d $TE_BASE/resources/lib`

	- `unzip target/ets-wms13-dgiwg-2021-VERSION-deps.zip -d $CATALINA_HOME/webapps/teamengine/WEB-INF/lib`
	



## How to contribute

If you would like to get involved, you can:

* [Report an issue](https://github.com/CESTA-centre/ets-wms13-dgiwg-2021/issues) such as a defect or an 
enhancement request
* Help to resolve an [open issue](https://github.com/CESTA-centre/ets-wms13-dgiwg-2021/issues?q=is%3Aopen)
* Fix a bug: Fork the repository, apply the fix, and create a pull request
* Add new tests: Fork the repository, implement (and verify) the tests on a new topic branch, 
and create a pull request
